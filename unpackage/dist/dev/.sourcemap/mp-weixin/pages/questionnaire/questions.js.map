{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/hgpub/Documents/HBuilderProjects/ColorUIDemo/pages/questionnaire/questions.vue?2f9d","webpack:///C:/Users/hgpub/Documents/HBuilderProjects/ColorUIDemo/pages/questionnaire/questions.vue?a1fd","webpack:///C:/Users/hgpub/Documents/HBuilderProjects/ColorUIDemo/pages/questionnaire/questions.vue?9434","webpack:///C:/Users/hgpub/Documents/HBuilderProjects/ColorUIDemo/pages/questionnaire/questions.vue?adb7","uni-app:///pages/questionnaire/questions.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4G;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC0L;AAC1L,gBAAgB,2LAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAytB,CAAgB,yrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgD7uB;AACA,MADA,kBACA;AACA;AACA,yBADA;AAEA,uBAFA;AAGA,mBAHA;AAIA,iBAJA;AAKA,kBALA;;AAOA,GATA;AAUA,QAVA,kBAUA,MAVA,EAUA;AACA;AACA,GAZA;AAaA;AACA;AACA,yFADA;AAEA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA,6BADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA,OAZA;;AAcA,GA5BA;AA6BA;AACA,eADA,uBACA,CADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA;AAQA,kBARA,0BAQA,CARA,EAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnBA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA,OANA,MAMA;AACA;AACA;AACA,mDADA;AAEA,sEAFA;;AAIA;AACA,wDADA;AAEA,wBAFA;AAGA,wBAHA;;AAKA;AACA,uGADA;;AAGA;AACA,KA7CA;AA8CA;AACA;AACA,mGADA;;AAGA,KAlDA,EA7BA,E","file":"pages/questionnaire/questions.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/questionnaire/questions.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./questions.vue?vue&type=template&id=44d784f8&\"\nvar renderjs\nimport script from \"./questions.vue?vue&type=script&lang=js&\"\nexport * from \"./questions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/questionnaire/questions.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./questions.vue?vue&type=template&id=44d784f8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./questions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./questions.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<cu-custom bgColor=\"bg-gradual-green\" :isBack=\"true\">\r\n\t\t\t<block slot=\"backText\">返回</block>\r\n\t\t\t<block slot=\"content\">{{ questionnaire.questionnaireName }}</block>\r\n\t\t</cu-custom>\r\n\t\t<view class=\"solids-bottom padding-xs flex align-center view-text\">\r\n\t\t\t<view class=\"flex-sub text-center\">\r\n\t\t\t\t<view class=\"solid-bottom text-xxl padding\">\r\n\t\t\t\t\t<text>{{ questionnaire.questionnaireName }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"solid-bottom text-xl text-gray\">\r\n\t\t\t\t\t<text>{{ questionnaire.questionnaireDescription }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-for=\"question in questions\" :key=\"question.questionId\">\r\n\t\t\t<view class=\"cu-bar bg-white solid-bottom margin-top\">\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t<text class=\"cuIcon-title text-green\"></text>{{ question.questionContent }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<radio-group class=\"block\" @change=\"RadioChange\" v-if=\"question.questionType=='单选'\">\r\n\t\t\t\t<view class=\"cu-form-group\" v-for=\"option in question.options\" :key=\"option.optionId\">\r\n\t\t\t\t\t<view class=\"title\">{{ option.optionContent }}</view>\r\n\t\t\t\t\t<radio :class=\"radio=='option.optionValue'?'checked':''\" :checked=\"radio=='option.optionValue'?true:false\" \r\n\t\t\t\t\t\t:value=\"question.questionId + '-' + option.optionValue\"></radio>\r\n\t\t\t\t</view>\r\n\t\t\t</radio-group>\r\n\t\t\t<checkbox-group class=\"block\" @change=\"CheckboxChange\" v-if=\"question.questionType=='多选'\">\r\n\t\t\t\t<view class=\"cu-form-group\" v-for=\"option in question.options\" :key=\"option.optionId\">\r\n\t\t\t\t\t<view class=\"title\">{{ option.optionContent }}</view>\r\n\t\t\t\t\t<checkbox :class=\"answers[optionId].checked?'checked':''\" :checked=\"answers[optionId].checked?true:false\"\r\n\t\t\t\t\t\t:value=\"question.questionId + '-' + option.optionValue\"></checkbox>\r\n\t\t\t\t</view>\r\n\t\t\t</checkbox-group>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"cu-bar bg-white btn-group foot\">\r\n\t\t\t<button class=\"cu-btn bg-blue shadow-blur round\" @click=\"handleClickResult()\">查看结果</button>\r\n\t\t\t<button class=\"cu-btn bg-green shadow-blur round\" @click=\"handleClickSubmit()\">提交答案</button>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tquestionnaireId: '',\r\n\t\t\t\tquestionnaire: [],\r\n\t\t\t\tquestions: [],\r\n\t\t\t\tanswers: [],\r\n\t\t\t\trequests: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option){\r\n\t\t\tthis.$data.questionnaireId = option.questionnaireId;\r\n\t\t},\r\n\t\tonReady: function() {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: 'http://localhost:8081/questionnaire/selectById/' + this.$data.questionnaireId,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.$data.questionnaire = res.data;\r\n\t\t\t\t\tthis.$data.questions = res.data.questions;\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '资源加载错误,请重试',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tRadioChange(e) {\r\n\t\t\t\tvar str = e.detail.value;\r\n\t\t\t\tvar split = str.search(/-/i);\r\n\t\t\t\tvar id = str.substring(0, split);\r\n\t\t\t\tvar chosen = str.substring(split + 1);\r\n\t\t\t\tthis.$data.answers[Number(id)] = chosen;\r\n\t\t\t},\r\n\t\t\tCheckboxChange(e) {\r\n\t\t\t\tvar items = e.detail.value;\r\n\t\t\t\tvar result = '';\r\n\t\t\t\tfor (var i = 0; i < items.length; ++i) {\r\n\t\t\t\t\tvar str = items[i];\r\n\t\t\t\t\tvar split = str.search(/-/i);\r\n\t\t\t\t\tvar id = str.substring(0, split);\r\n\t\t\t\t\tvar chosen = str.substring(split + 1);\r\n\t\t\t\t\tresult += '-' + chosen;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$data.answers[Number(id)] = result;\r\n\t\t\t},\r\n\t\t\thandleClickSubmit: function() {\r\n\t\t\t\t//检查问卷是否填写完成\r\n\t\t\t\tvar jsonLength = 0;\r\n\t\t\t\tfor (var answer in this.$data.answers) jsonLength++;\r\n\t\t\t\tif (jsonLength != this.$data.questions.length) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '尚未完成问卷',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//map通过指定函数调用一个数组中每一项元素，来创建一个新数组\r\n\t\t\t\t\tconst requests = this.$data.questions.map(question => ({\r\n\t\t\t\t\t\t\"resultQuestionId\": question.questionId,\r\n\t\t\t\t\t\t\"resultContent\": this.$data.answers[question.questionId]\r\n\t\t\t\t\t}));\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'http://localhost:8081/result/insertOne/',\r\n\t\t\t\t\t\tdata: requests,\r\n\t\t\t\t\t\tmethod: 'POST'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/questionnaire/complete?questionnaireId=' + this.questionnaireId + '&userId=' + 1\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleClickResult: function() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/questionnaire/result?questionnaireId=' + this.questionnaireId + '&userId=' + 1\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t\r\n</style>\n"],"sourceRoot":""}